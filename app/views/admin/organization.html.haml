= content_for :title, 'Admin Console'

%h1 Administration Console
%ul.nav.nav-tabs{:'data-tabs' => 'tabs'}
  %li.active= link_to 'General', '#general', :'data-toggle' => 'tab'
  %li= link_to 'Branding', '#branding', :'data-toggle' => 'tab'
  %li= link_to 'Payment', '#payment', :'data-toggle' => 'tab'

.tab-content
  #general.tab-pane.active
    - if flash[:notice] == :success
      .alert.alert-success{style: 'width:275px'}
        %a.close{:'data-dismiss' => 'alert'} ×
        Organization info successfully updated!
    = form_for :organization, url: '/admin/update_org', html: { class: 'form form-horizontal' } do |f|
      .control-group
        %label Timezone:
        .controls= time_zone_select :organization, :timezone, ActiveSupport::TimeZone.us_zones, default: 'Pacific Time (US & Canada)'
      .control-group
        %label Camper unit name:
        .controls
          .input= f.text_field :unit_name, placeholder: 'camper, student, etc.', value: organization.unit_name
      = f.submit :Update, class: 'btn btn-success'
  #branding.tab-pane
    - if flash[:notice] == :success
      .alert.alert-success{style: 'width:275px'}
        %a.close{:'data-dismiss' => 'alert'} ×
        Organization info successfully updated!
    = form_for :organization, url: '/admin/update_org', html: { class: 'form form-horizontal' } do |f|
      .control-group
        %label Background color:
        .controls
          .input= f.text_field :color, placeholder: '#BFE3CD', value: organization.color
      .control-group
        %label Welcome Message:
        .controls
          .input= f.text_field :welcome_title, placeholder: 'welcome title', value: organization.welcome_title
      .control-group
        %label Organization Description:
        .controls
          .input= f.text_area :welcome_message, placeholder: 'welcome message', value: organization.welcome_message, style: 'height:100px'
      .control-group
        %label Registration Message:
        .controls
          .input= f.text_area :registration_message, placeholder: 'registration message', value: organization.registration_message, style: 'height:100px'
      .control-group
        %label Welcome Email Title:
        .controls
          .input= f.text_field :email_subject, placeholder: 'email subject', value: organization.email_subject
      .control-group
        %label Welcome Email Message:
        .controls
          .input= f.text_area :email_message, placeholder: 'welcome email message', value: organization.email_message, style: 'height:100px'
      .control-group
        %label Footer text:
        .controls
          .input= f.text_area :footer, placeholder: 'footer text', value: organization.footer, style: 'height:100px'
      .control-group
        %label Banner image:
        .controls
          .input= f.file_field :banner
      - if organization.banner.present?
        .control-group
          %label Remove image?
          .controls
            .input= f.check_box :remove_banner
      = f.submit :Update, class: 'btn btn-success'
 
  #payment.tab-pane
    - if flash[:notice] == :success
      .alert.alert-success{style: 'width:275px'}
        %a.close{:'data-dismiss' => 'alert'} ×
        Organization info successfully updated!
    = form_for :organization, url: '/admin/update_org', html: { class: 'form form-horizontal' } do |f|
      .control-group
        %label Stripe Secret:
        .controls
          .input= f.text_field :stripe_secret, value: organization.stripe_secret
      .control-group
        %label Stripe Publishable:
        .controls
          .input= f.text_field :stripe_publishable, value: organization.stripe_publishable
      = f.submit :Update, class: 'btn btn-success'
 
